{% extends "base.html" %}

{% block title %}Error - Facebook Analytics{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card">
            <div class="card-header bg-danger text-white">
                <h4 class="mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    {% if error_code == 404 %}Page Not Found
                    {% elif error_code == 500 %}Server Error
                    {% elif error_code == 403 %}Access Denied
                    {% else %}Something Went Wrong
                    {% endif %}
                </h4>
            </div>
            <div class="card-body text-center py-5">
                <div class="mb-4">
                    {% if error_code == 404 %}
                    <i class="fas fa-search fa-5x text-muted mb-3"></i>
                    <h3>We couldn't find that page</h3>
                    <p class="text-muted">The page you're looking for doesn't exist or has been moved.</p>
                    {% elif error_code == 500 %}
                    <i class="fas fa-server fa-5x text-muted mb-3"></i>
                    <h3>Something went wrong on our end</h3>
                    <p class="text-muted">We're experiencing technical difficulties. Please try again later.</p>
                    {% elif error_code == 403 %}
                    <i class="fas fa-ban fa-5x text-muted mb-3"></i>
                    <h3>Access denied</h3>
                    <p class="text-muted">You don't have permission to access this resource.</p>
                    {% else %}
                    <i class="fas fa-bug fa-5x text-muted mb-3"></i>
                    <h3>Unexpected error</h3>
                    <p class="text-muted">An unexpected error occurred while processing your request.</p>
                    {% endif %}
                </div>

                <!-- Error details (shown only in development mode) -->
                {% if error and config.DEBUG %}
                <div class="alert alert-warning text-start mt-4">
                    <h5 class="alert-heading">Error Details (Development Mode)</h5>
                    <hr>
                    <p class="mb-1"><strong>Error Code:</strong> {{ error_code }}</p>
                    <p class="mb-1"><strong>Error Message:</strong> {{ error }}</p>
                    
                    {% if error_description %}
                    <p class="mb-1"><strong>Description:</strong> {{ error_description }}</p>
                    {% endif %}
                    
                    <!-- Stack trace for server errors -->
                    {% if error_code == 500 and error_traceback %}
                    <div class="mt-3">
                        <h6>Stack Trace:</h6>
                        <pre class="bg-dark text-light p-3 small rounded overflow-auto" style="max-height: 200px;">{{ error_traceback }}</pre>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <div class="mt-4">
                    <a href="{{ url_for('index') }}" class="btn btn-primary me-2">
                        <i class="fas fa-home me-1"></i> Go Home
                    </a>
                    
                    <a href="javascript:history.back()" class="btn btn-outline-secondary me-2">
                        <i class="fas fa-arrow-left me-1"></i> Go Back
                    </a>
                    
                    <button onclick="window.location.reload()" class="btn btn-outline-primary">
                        <i class="fas fa-sync-alt me-1"></i> Try Again
                    </button>
                </div>

                <!-- Support information -->
                <div class="mt-5 pt-4 border-top">
                    <p class="text-muted small">
                        If this problem continues, please contact support with the error details above.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}